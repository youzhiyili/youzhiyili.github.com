---
layout: post
title: Ubuntu+Openbox还原脚本
---
<hr><h3 style="color:SteelBlue">第一步：安装<a href="http://releases.ubuntu.com/12.04/ubuntu-12.04.1-alternate-i386.iso" style="text-decoration:none" target="_blank">UBUNTU</a>基本系统</h3>
	安装基本的命令行系统，选英文。
	装好重启后马上把系统tar备份(只有186M)，下次重装1分钟就可以解压

<hr><h3 style="color:SteelBlue">第二步：执行脚本</h3>
#!/bin/bash

<b style="color:MidnightBlue">#联网----------->卸载DHCP、配置拨号、<a href="http://forum.ubuntu.org.cn/viewtopic.php?f=116&t=382878&p=2807776#p2807776" style="text-decoration:none" target="_blank">解决掉线</a>、网络接口</b>
sudo apt-get -y purge isc-dhcp-client && sudo pppoeconf && sudo pon dsl-provider && sudo /etc/init.d/networking restart
sudo sed -e 's/interval 30/interval 300000/' -e 's/failure 4/failure 40000/' -i /etc/ppp/options
sudo sed -e '/auto eth0/s/^/#&/' -e '/dhcp/s/^/#/' -i /etc/network/interfaces
sudo sed -e '/192.168/s/^/#&/' -e '/dhcp/s/^/#/' -i /etc/resolv.conf

<b style="color:MidnightBlue">#加速-----------><a href="http://forum.ubuntu.org.cn/viewtopic.php?f=139&t=383665" style="text-decoration:none" target="_blank">取消开机配置网络等待60秒</a></b>
sudo sed -e 's/sleep 20/sleep 0/' -e 's/sleep 40/sleep 0/' -e 's/sleep 59/sleep 0/' -e 's/sleep 1/sleep 0/' -i /etc/init/failsafe.conf

<b style="color:MidnightBlue">#时间----------->设置地区、同步时间、写入硬件</b>
sudo rm /etc/localtime && sudo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && sudo ntpdate-debian && sudo hwclock -w

<b style="color:MidnightBlue">#换源----------->网易源http://mirrors.163.com/</b>
sudo wget http://ubuntuone.com/4CaJOYzm68pPmTJOwhwRRb -O /etc/apt/sources.list && sudo apt-get update

<b style="color:MidnightBlue">#公钥----------->extras.ubuntu.com precise Release:<a href="http://forum.ubuntu.org.cn/viewtopic.php?f=50&t=150633" style="text-decoration:none" target="_blank">没有公钥无法验证签名</a>：16126D3A3E5C1192</b>
sudo gpg --keyserver subkeys.pgp.net --recv 16126D3A3E5C1192 && sudo gpg --export --armor 16126D3A3E5C1192 | sudo apt-key add -
sudo apt-get update

<b style="color:MidnightBlue">#调包----------->从U盘还原软件包</b>
#sudo tar zxvf /mnt/back/deb.tgz -C /

<b style="color:MidnightBlue">#中文----------->中文包、输入法、字体、<a href="http://forum.ubuntu.org.cn/viewtopic.php?f=48&t=376858" style="text-decoration:none" target="_blank">Local</a></b>
sudo sed -e '$a\LANG="zh_CN.UTF-8"' -e '$a\LANGUAGE="zh_CN:zh:en_US:en"' -i /etc/environment
sudo sed -n -e '1 i\LANG="zh_CN.UTF-8"' -e 'a\LANGUAGE="zh_CN:zh:en_US:en"' -i /etc/default/locale
sudo sed '1 i\zh_CN.UTF-8 UTF-8' -i /var/lib/locales/supported.d/local
sudo apt-get install language-pack-zh-hans fcitx ttf-wqy-microhei && fc-cache -fv && sudo locale-gen

<b style="color:MidnightBlue">#图形----------->X环境+显卡驱动+<a href="http://wiki.ubuntu.org.cn/UbuntuHelp:Openbox/zh" style="text-decoration:none" target="_blank">openbox套件</a></b>
sudo apt-get install xorg nvidia-current openbox tint2 tilda feh scrot thunar lxappearance cairo-dock

<b style="color:MidnightBlue">#声音----------->ALSA+[obmixer+pavucontrol]<---------<a href="http://forum.ubuntu.org.cn/viewtopic.php?t=393406&p=2885561" style="text-decoration:none" target="_blank">面板音量控制</a></b>
sudo apt-get install alsa pavucontrol && sudo gpasswd -a meme audio && alsamixer
wget http://jpegserv.com/linux/obmixer/obmix ... 1_i386.deb && sudo dpkg -i o*deb && rm o*deb

<b style="color:MidnightBlue">#软件----------->系统、网络、图像、影音、文字、压缩....可随意增减</b>
sudo apt-get install \
htop \
chromium-browser mutt msmtp newsbeuter \
mtpaint mirage \
moc smplayer xbmc \
leafpad mupdf \
zip unzip rar unrar p7zip p7zip-full p7zip-rar

<b style="color:MidnightBlue">#挂载-----------><a href="http://forum.ubuntu.org.cn/viewtopic.php?f=155&t=343256" style="text-decoration:none" target="_blank">给Thunar挂载设备权限</a></b>
sudo sed -e 's/any>no/any>yes/' -e 's/auth_admin_keep/yes/' -e 's/auth_admin/yes/' -i /usr/share/polkit-1/actions/org.freedesktop.udisks.policy

<b style="color:MidnightBlue">#登录-----------><a href="http://forum.ubuntu.org.cn/viewtopic.php?f=39&t=250150&p=2008292" style="text-decoration:none" target="_blank">tty1自动登录</a></b>
echo -e '#!/bin/bash \n/bin/login -f meme' > autologin && chmod +x autologin && sudo cp autologin /usr/bin/autologin && rm autologin
sudo sed '$d' -i /etc/init/tty1.conf && sudo sed '$a\exec /sbin/getty -n -l /usr/bin/autologin 38400 tty1' -i /etc/init/tty1.conf

<b style="color:MidnightBlue">#引导----------->设置启动选项、<a href="http://qyiyunso.blog.163.com/blog/static/35077686201123121442468/" style="text-decoration:none" target="_blank">启用framebuffer</a>、终端分辨率</b>
sudo sed -e 's/=10/=2/' -e 's/quiet splash/text/' -e 's/""/"vga=792"/' -e '/640x480/s/#//' -e 's/640x480/1204x768/' -i /etc/default/grub
sudo update-grub

<b style="color:MidnightBlue">#配置----------->家目录配置文件</b>
#tar zxvf /mnt/back/conf.home.tgz -C ~/
wget http://ubuntuone.com/2n2bkjQZUcgA3YPXPhv2kR -O conf.home.tgz && tar zxvf *home.tgz -C ~/ && rm *home.tgz

<b style="color:MidnightBlue">#化蝶</b>
###wget http://ubuntuone.com/933bu8H9H4B7S2O97GP6U15zN6dswtE -O goa.zip && unzip goa.zip && rm goa.zip

<b style="color:MidnightBlue">#<a href="http://forum.ubuntu.org.cn/viewtopic.php?f=48&t=395656" style="text-decoration:none" target="_blank">swap</a>----------->创建大小为1G的文件用于swap，文件名swapfile，路径/</b>
#sudo dd if=/dev/zero of=/swapfile bs=1M count=1024 && sudo chmod 600 /swapfile && sudo mkswap /swapfile
#sudo sed -i '$a\/swapfile swap swap defaults 0 0' /etc/fstab

<b style="color:MidnightBlue">#重启</b>
sudo reboot 

<hr><h3 style="color:SteelBlue">第三步：享受Ubuntu</h3>
<img src="/images/ubuntu.openbox.png">